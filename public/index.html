  <!DOCTYPE html>
<html>
<head>
  <title>Chat App</title>
</head>
<body id="body" style="margin-left: 30px; padding: 10px; background: #ffffff; color: #000000; transition: background 0.3s, color 0.3s;">

  <div style="display: inline-block;">

    <!-- Title -->
    <h2><font size="5">Simple Chat</font></h2>

    <!-- Buttons and DateTime container -->
    <div style="display: flex; align-items: center; gap: 10px;">

      <!-- Buttons -->
      <div>
        <button onclick="toggleFullScreen()" title="Toggle Fullscreen">ğŸ–¥ï¸</button>
        <button onclick="toggleTheme()" id="themeBtn" title="Toggle Theme">ğŸŒ™</button>
      </div>

      <!-- DateTime -->
      <div id="dateTime" style="font-size: 14px; font-family: monospace; white-space: nowrap;"></div>

    </div>

    <br><br>

    <!-- Form -->
    <form id="form" autocomplete="off">
      <input id="input" placeholder="Type a message..." size="20" style="height:15px;" />
      <button><font size="2">Send</font></button>
    </form>

    <br><br>

    <!-- Messages Container -->
    <div id="messages" style="display: inline-block;"></div>

  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script>
    var socket = io();
    var form = document.getElementById('form');
    var input = document.getElementById('input');
    var messages = document.getElementById('messages');
    var themeBtn = document.getElementById('themeBtn');
    var darkMode = false;

    form.addEventListener('submit', function(e) {
      e.preventDefault();
      if (input.value) {
        socket.emit('chat message', input.value);
        input.value = '';
      }
    });

    socket.on('chat message', function(msg) {
      var item = document.createElement('div');
      item.innerHTML = "<font size='4'>" + msg + "</font><br><br>";
      messages.appendChild(item);
      window.scrollTo(0, document.body.scrollHeight);
    });

    // Fullscreen toggle
    function toggleFullScreen() {
      if (!document.fullscreenElement) {
        document.documentElement.requestFullscreen().catch((err) => {
          alert(`Error attempting fullscreen: ${err.message}`);
        });
      } else {
        document.exitFullscreen();
      }
    }

    // Theme toggle with icon change
    function toggleTheme() {
      var body = document.getElementById('body');
      darkMode = !darkMode;
      if (darkMode) {
        body.style.background = "#121212";
        body.style.color = "#ffffff";
        themeBtn.innerText = "ğŸŒ"; // Light mode icon
      } else {
        body.style.background = "#ffffff";
        body.style.color = "#000000";
        themeBtn.innerText = "ğŸŒ™"; // Dark mode icon
      }
    }

    // Date and time update function
    function updateDateTime() {
      var now = new Date();

      var hours = now.getHours();
      var minutes = now.getMinutes();
      var seconds = now.getSeconds();

      var ampm = hours >= 12 ? 'PM' : 'AM';
      hours = hours % 12;
      hours = hours ? hours : 12; // hour '0' should be '12'

      // Pad minutes and seconds with leading zeros
      minutes = minutes < 10 ? '0' + minutes : minutes;
      seconds = seconds < 10 ? '0' + seconds : seconds;

      var month = now.getMonth() + 1; // Months start at 0
      var day = now.getDate();
      var year = now.getFullYear();

      // Format: MM/DD/YYYY HH:MM:SS AM/PM
      var formattedDateTime = month + '/' + day + '/' + year + ' ' + hours + ':' + minutes + ':' + seconds + ' ' + ampm;

      document.getElementById('dateTime').innerText = formattedDateTime;
    }

    // Update time every second
    setInterval(updateDateTime, 1000);
    updateDateTime(); // initial call

    // Keyboard shortcuts for Space + F and Space + T
    var spacePressed = false;
    document.addEventListener('keydown', function(event) {
      if (event.code === 'Space') {
        spacePressed = true;
      } else if (spacePressed) {
        var key = event.key.toLowerCase();
        if (key === 'f') {
          event.preventDefault();
          toggleFullScreen();
          spacePressed = false;
        }
        if (key === 't') {
          event.preventDefault();
          toggleTheme();
          spacePressed = false;
        }
      }
    });

    document.addEventListener('keyup', function(event) {
      if (event.code === 'Space') {
        spacePressed = false;
      }
    });
  </script>
</body>
</html>
